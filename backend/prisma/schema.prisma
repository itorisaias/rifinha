generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int      @id @default(autoincrement())
  name          String   @db.VarChar(255)
  email         String   @unique(map: "email") @db.VarChar(255)
  password_hash String   @db.VarChar(255)
  created_at    DateTime @db.DateTime(0)
  updated_at    DateTime @db.DateTime(0)
  rifas         Rifa[]
  tickets       Ticket[]
}

model Rifa {
  id                Int      @id @default(autoincrement())
  name              String   @db.VarChar(255)
  owner             User     @relation(fields: [ownerId], references: [id])
  ownerId           Int      @unique
  total_value       Float    @db.Float
  ticket_amount     Int      @db.Int
  tiket_value       Float    @db.Float
  remaining_tickets Int      @db.Int
  created_at        DateTime @db.DateTime(0)
  updated_at        DateTime @db.DateTime(0)
  tickets           Ticket[]
}

model Ticket {
  id      Int  @id @default(autoincrement())
  rifa    Rifa @relation(fields: [rifaId], references: [id])
  rifaId  Int  @unique
  buyer   User @relation(fields: [buyerId], references: [id])
  buyerId Int  @unique
}
